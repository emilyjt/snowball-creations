{% extends "base.html" %}

{% block content %}
<h1>Client Base</h1>

<div class="new-client-base">
  <div>
    <div class="new-client-base-headers" style="display: flex; justify-content: space-evenly; align-items: center;">
      <div>ID</div>
      <div>Created</div>
      <div>Company Name</div>
      <div>Contact Name</div>
      <div>Contact Email</div>
      <div>Social Username</div>
      <div>Social URL</div>
      <div>Service</div>
      <div>Price</div>
      <div>Subscription Create Date</div>
      <div>Subscription Start Date</div>
    </div>

    {% for subscription in object_list %}
    <div class="new-client-base-row" style="display: flex; justify-content: space-evenly; align-items: center; transition: 0.2s ease-in-out;">      
      <div>{{ subscription.id }}</div>
      <div>{{ company.date_created }} --></div>
      {% with subscription.company_set.all|first as company %}
      <div>{{ company.name }}</div>
      <div>{{ company.primary_contact.name }}</div>
      <div>{{ company.primary_contact.email }}</div>
      {% endwith %}
      <div>{{ subscription.social_profile.username }}</div>
      <div>{{ subscription.social_profile.url }}</div>
      <div>{{ subscription.service_used.name }}</div>
      <div>{{ subscription.service_used.price }}</div>
      <div>{{ subscription.created_at }}</div>
      <div>{{ subscription.date_started }}</div>
    </div>
    {% endfor %}
    <!-- This is the total price row -->
    <div class="new-client-base-row">    
        <!-- We can just call that new context with it's name 'totalPrice' and it appears -->
      Total: {{ totalPrice }}            
    </div>    
    </div>
  </div>
</div>
{% endblock content %}
